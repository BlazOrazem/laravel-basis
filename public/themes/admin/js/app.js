var http=http||{};http.token=function(){return $("meta[name=_token]").attr("content")},http.get=function(e,t){return $.getJSON(e,t).error(function(e){http.handleAjaxError(e)})},http.post=function(e,t){return $.ajax({url:e,dataType:"json",method:"POST",beforeSend:function(e){e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("Accept","application/json"),e.setRequestHeader("X-CSRF-TOKEN",http.token())},data:JSON.stringify(t)})},http.postHtml=function(e,t){return $.ajax({url:e,dataType:"html",method:"POST",beforeSend:function(e){e.setRequestHeader("X-CSRF-TOKEN",http.token())},data:t})},http.put=function(e,t){return t._method="PUT",http.post(e,t)},http.patch=function(e,t){return t._method="PATCH",http.post(e,t)},http.delete=function(e,t){return t._method="DELETE",http.post(e,t)},http.handleAjaxError=function(e){alert("AJAX error - details have been dumped to console."),console.log(e)};var PreLoader={init:function(){$("#preloader").height($(window).height()+"px"),$(window).on("load",function(){$("body").css("overflow-y","visible"),$("#preloader").fadeOut(100)})}},MetisMenu={init:function(){$(".metismenu").metisMenu({activeClass:"active"}),MetisMenu.handleActive()},handleActive:function(){var e=$("#activeUrl").val(),t=$('.metismenu li a[href="'+e+'"]'),n=t.parentsUntil(".metismenu").last();t.parent().addClass("active"),n.addClass("active"),n.find("ul.nav.collapse").addClass("in");var i=$(location).attr("pathname").replace("/",""),o=$('a[href="'+i+'"]');$(".sidebar").find(o).addClass("current-page"),o.closest("ul").parent().addClass("current-block")}},JsTree={init:function(){var e=$(".jstree");e.bind("loaded.jstree",function(e,t){t.instance.open_all()}),e.jstree({core:{themes:{responsive:!1}},types:{default:{icon:"jt jt-page"},folder:{icon:"jt jt-folder"},new:{icon:"jt jt-new"}},plugins:["types","state"]})}},DataTables={init:function(){DataTables.initStandardTable(),DataTables.initSearchableTable(),DataTables.initPaginatableTable(),DataTables.initNonSortableTable(),DataTables.handleSearchablePlaceholder()},initStandardTable:function(){$(".datatable:not(.search):not(.search-paginate):not(.non-sortable)").DataTable({dom:'<"clear-filter">rti',info:!1,paging:!1,responsive:!0,columnDefs:[{targets:"no-sort",orderable:!1}]})},initSearchableTable:function(){$(".datatable.search:not(.paginate)").DataTable({dom:'<"clear-filter">frti',info:!1,paging:!1,responsive:!0,oLanguage:{sSearch:""},columnDefs:[{targets:"no-sort",orderable:!1}]})},initPaginatableTable:function(){$(".datatable.search.paginate").DataTable({dom:'<"top"lf>rt<"bottom"ip><"clear">',info:!0,paging:!0,responsive:!0,oLanguage:{sSearch:""},columnDefs:[{targets:"no-sort",orderable:!1}]})},initNonSortableTable:function(){$(".datatable.non-sortable").DataTable({dom:'<"clear-filter">rti',info:!1,paging:!1,ordering:!1,responsive:!0})},handleSearchablePlaceholder:function(){$(".datatable.search").each(function(){$(this).closest(".data-table").find(".dataTables_filter input").attr("placeholder",$(this).data("search"))})}},Responsive={init:function(){Responsive.handleFullContentHeight(),Responsive.handleResponsiveElements(),$(window).resize(function(){Responsive.handleResponsiveElements(!0)}),$(window).width()<=1024&&Responsive.changeTitlePosition(),$(window).resize(function(){if($(window).width()<=1024)Responsive.changeTitlePosition();else{var e=$(".page-title").remove();$(".navbar-container > .pull-left").html(e)}})},handleFullContentHeight:function(){$(".container-fluid").css("min-height",$(window).height()-150+"px"),$(window).resize()&&$(".container-fluid").css("min-height",$(window).height()-150+"px")},handleResponsiveElements:function(e){$(window).width()>=1440?($(".side-panel").addClass("open"),$(".sidepanel-toggle").parent().addClass("open"),e?$("body").addClass("fixed-sidebar-example small-content"):$("body").addClass("small-content")):($(".side-panel").removeClass("open"),$(".sidepanel-toggle").parent().removeClass("open"),$("body").removeClass("fixed-sidebar-example small-content"))},changeTitlePosition:function(){var e=$(".page-title").remove();$(".breadcrumb")[0]?$(".breadcrumb").eq(0).after(e):$(".container-fluid > .row").eq(0).before(e)}},ScrollBar={init:function(){ScrollBar.handleBodyScroll(),ScrollBar.handleSidebarScroll(),ScrollBar.handleContentScroll()},handleBodyScroll:function(){$(window).width()>1024&&$("body").has(".navbar").length&&$("body").mCustomScrollbar({theme:"minimal-dark",scrollInertia:200,mouseWheel:{scrollAmount:150},callbacks:{onCreate:function(){$(".mCSB_scrollTools").last().addClass("body-scroll")}}})},handleSidebarScroll:function(){$(window).width()>768?$(".sidebar").mCustomScrollbar({theme:"minimal",scrollInertia:0,mouseWheel:{preventDefault:!0}}):$(".sidebar").css("overflow-y","auto")},handleContentScroll:function(){$(".content-scroll")[0]&&$(".content-scroll").mCustomScrollbar({theme:"minimal-dark",scrollInertia:50})}},WavesEffect={init:function(){Waves.attach(".btn"),Waves.init()}},MenuSearchBar=function(){$(".searchbox-icon");return{init:function(){var e=$(".searchbox-icon"),t=$(".searchbox-input"),n=$(".searchbox"),i=!1;e.on("click",function(){!1===i?(n.addClass("searchbox-open"),t.focus(),i=!0):(n.removeClass("searchbox-open"),$(window).width()<769&&setTimeout(function(){$(".page-title").fadeIn(300)},100),t.focusout(),i=!1)}),e.on("mouseup",function(){return!1}),n.on("mouseup",function(){return!1}),$(document).on("mouseup",function(){!0===i&&($(".searchbox-icon").css("display","block"),e.click())})}}}(),DropDownMenu={init:function(){$(".dropdown")[0]&&($("body").on("click",".dropdown.open .dropdown-menu",function(e){e.stopPropagation()}),$(".dropdown").on("shown.bs.dropdown",function(e){$(this).attr("data-animation")&&($animArray=[],$animation=$(this).data("animation"),$animArray=$animation.split(","),$animationIn="animated "+$animArray[0],$animationOut="animated "+$animArray[1],$animationDuration="",$animArray[2]?$animationDuration=$animArray[2]:$animationDuration=500,$(this).find(".dropdown-menu").removeClass($animationOut),$(this).find(".dropdown-menu").addClass($animationIn))}),$(".dropdown").on("hide.bs.dropdown",function(e){$(this).attr("data-animation")&&(e.preventDefault(),$this=$(this),$dropdownMenu=$this.find(".dropdown-menu"),$dropdownMenu.addClass($animationOut),setTimeout(function(){$this.removeClass("open")},$animationDuration))}))}},FullScreenMode={init:function(){$(".fullscreen").on("click",function(e){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.msRequestFullscreen?document.documentElement.msRequestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT),$(".fullscreen i").toggleClass("zmdi-fullscreen zmdi-fullscreen-exit"),e.preventDefault()}),$(".fullscreen-btn").on("click",function(e){e.preventDefault(),element=$(this).closest(".content-box").get(0),document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement?(element.classList.remove("is-fullscreen"),$(this).find("i").toggleClass("zmdi-fullscreen-exit zmdi-fullscreen"),document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()):(element.classList.add("is-fullscreen"),$(this).find("i").toggleClass("zmdi-fullscreen zmdi-fullscreen-exit"),element.requestFullscreen?element.requestFullscreen():element.mozRequestFullScreen?element.mozRequestFullScreen():element.webkitRequestFullscreen?element.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):element.msRequestFullscreen&&element.msRequestFullscreen())})}},ContentBlock={init:function(){$(".close-btn").on("click",function(e){e.preventDefault(),$(this).closest(".content-box").fadeOut(200,function(){$(this).remove()})});var e=!1;$(".collapse-btn").on("click",function(t){t.preventDefault(),e?($(this).closest(".content-box").find(".content").slideDown(200),$(this).find("i").toggleClass("zmdi-plus zmdi-minus"),e=!1):($(this).closest(".content-box").find(".content").slideUp(200),$(this).find("i").toggleClass("zmdi-minus zmdi-plus"),e=!0)}),$(".refresh-btn").on("click",function(e){var t=$(this).closest("div.content-box");$("<div class='refresh-preloader'><div class='preloader'><i>.</i><i>.</i><i>.</i></div></div>").appendTo(t).fadeIn(200),setTimeout(function(){var e=t.find(".refresh-preloader");e.fadeOut(200,function(){e.remove()})},2500),e.preventDefault()})}},FormComponents={init:function(){$(".selectpicker")[0]&&$(".selectpicker").selectpicker({iconBase:"zmdi",tickIcon:"zmdi-check"}),$(".fg-input")[0]&&($("body").on("focus",".form-control",function(){$(this).closest(".fg-input").addClass("fg-active")}),$("body").on("blur",".form-control",function(){var e=$(this).closest(".form-group"),t=e.find(".form-control").val();e.hasClass("fg-float")?0===t.length&&$(this).closest(".fg-input").removeClass("fg-active"):$(this).closest(".fg-line").removeClass("fg-active")})),$(".fg-float")[0]&&$(".fg-float .form-control").each(function(){0!==$(this).val().length&&$(this).closest(".fg-input").addClass("fg-active")}),$(".qtyplus").on("click",function(e){e.preventDefault(),fieldName=$(this).attr("data-field");var t=parseInt($("input[name="+fieldName+"]").val());isNaN(t)?$("input[name="+fieldName+"]").val(0):$("input[name="+fieldName+"]").val(t+1)}),$(".qtyminus").on("click",function(e){e.preventDefault(),fieldName=$(this).attr("data-field");var t=parseInt($("input[name="+fieldName+"]").val());!isNaN(t)&&t>0?$("input[name="+fieldName+"]").val(t-1):$("input[name="+fieldName+"]").val(0)})}},Notifications={init:function(){$(".notification-container").mCustomScrollbar({theme:"minimal-dark",scrollInertia:0,mouseWheel:{preventDefault:!0}}),$(".notification>a").on("click",function(e){$(this).parent().toggleClass("open")}),$("body").on("click",function(e){$(".notification").is(e.target)||0!==$(".notification").has(e.target).length||0!==$(".open").has(e.target).length||$(".notification").removeClass("open")}),$(".notification .clear-all").on("click",function(e){e.preventDefault(),$(".notification-container").mCustomScrollbar("disable"),$(".notification-container a").each(function(e){setTimeout(function(){$(".notification-container a").eq(e).addClass("animated fadeOutRight")},50*e)}),setTimeout(function(){$(".check-ok").fadeIn(200)},800)})}},TimeDisplay={init:function(){$(".current-date")[0]&&$(".time")[0]&&(TimeDisplay.datetime=$(".current-date"),TimeDisplay.time=$(".time"),TimeDisplay.update(),setInterval(TimeDisplay.update,1e3))},update:function(){TimeDisplay.date=moment(new Date),TimeDisplay.datetime.html(TimeDisplay.date.format("DD MMMM YYYY <br> dddd")),TimeDisplay.time.html(TimeDisplay.date.format("H:mm:ss"))}},Tooltips={init:function(){$('[data-toggle="tooltip"]')[0]&&$('[data-toggle="tooltip"]').tooltip({container:"body"})}},Popover={init:function(){$('[data-toggle="popover"]')[0]&&$('[data-toggle="popover"]').popover()}},Collapse={init:function(){Collapse.buttons(),Collapse.fix()},buttons:function(){$(".open-all-panels").on("click",function(){$(this).closest(".panel-group").find(".collapse").collapse("show")}),$(".close-all-panels").on("click",function(){$(this).closest(".panel-group").find(".collapse").collapse("hide")})},fix:function(){$(".collapse")[0]&&($(".collapse").on("show.bs.collapse",function(e){$(this).closest(".panel").find(".panel-heading").addClass("active")}),$(".collapse").on("hide.bs.collapse",function(e){$(this).closest(".panel").find(".panel-heading").removeClass("active")}),$(".collapse.in").each(function(){$(this).closest(".panel").find(".panel-heading").addClass("active")}))}},SidePanel={init:function(){$(".side-panel .tab-pane").mCustomScrollbar({theme:"minimal",scrollInertia:0,mouseWheel:{preventDefault:!0}}),$(".sidepanel-toggle").on("click",function(e){e.preventDefault(),$(this).parent().toggleClass("open"),$(".side-panel").toggleClass("open")}),$("body").on("click",".menu-toggle",function(e){e.preventDefault(),$(".side-panel").removeClass("open"),$(".sidepanel-toggle").parent().removeClass("open"),$("body").hasClass("open-menu")&&$(document).on("click",function(e){0===$(e.target).closest(".sidebar").length&&0===$(e.target).closest(".menu-toggle").length&&setTimeout(function(){$("body").hasClass("fixed-sidebar")||($("body").removeClass("open-menu"),$(".logo").hide()),$(".menu-toggle").removeClass("toggled"),$(".menu-toggle i").removeClass("zmdi-arrow-left").addClass("zmdi-menu"),$(".menu-overlay").fadeOut(300,function(){$(".menu-overlay").remove()})})})}),$("body").on("click",".sidepanel-toggle",function(e){e.preventDefault(),$(".more-options, .notification").removeClass("open"),$(".side-panel").hasClass("open")&&$(document).on("click",function(e){0===$(e.target).closest(".side-panel").length&&0===$(e.target).closest(".sidepanel-toggle").length&&setTimeout(function(){$(".side-panel").removeClass("open"),$(".sidepanel-toggle").parent().removeClass("open")})})}),$(".more-options a, .notification a").on("click",function(){$(".side-panel").removeClass("open"),$(".sidepanel-toggle").parent().removeClass("open")})}},MenuToggle={init:function(){$(".menu-toggle").on("click",function(){$("body").toggleClass("open-menu"),$(this).toggleClass("toggled"),$(".menu-toggle i").toggleClass("zmdi-menu zmdi-arrow-left"),$(window).width()<768&&($("body").append("<div class='menu-overlay'></div>"),$(".menu-overlay").fadeIn(300)),$("body").hasClass("open-menu")?$(window).width()>=1024&&setTimeout(function(){$(".logo").show()},300):($(".logo").hide(),$(".menu-overlay").fadeOut(100,function(){$(".menu-overlay").remove()}))}),$(window).on("resize",function(){$("body").hasClass("open-menu")&&($(window).width()>=1024&&setTimeout(function(){$(".logo").show()},300),$(window).width()<1024&&$(".logo").hide())})}},Nestable={init:function(){$.fn.NestableList=function(){this.length&&void 0!==$.fn.nestable&&this.nestable({rootClass:"nestable",listNodeName:"ul",listClass:"nestable-list",itemClass:"nestable-item",dragClass:"nestable-drag",handleClass:"nestable-handle-off",collapsedClass:"nestable-collapsed",placeClass:"nestable-placeholder",emptyClass:"nestable-empty"})},Nestable.bind()},bind:function(){$(".nestable").NestableList()}},Editable={init:function(){$.fn.editable.defaults.mode="inline",$.fn.editable.defaults.params=function(e){return e._token=$('meta[name="_token"]').attr("content"),e},Editable.bind()},bind:function(){$(".editable").editable({showbuttons:"right",placement:"top",onblur:"ignore",type:"wysihtml5",send:"always",wysihtml5:{toolbar:{"font-styles":!0,emphasis:!0,lists:!0,link:!0,html:!0,image:!1,color:!1}},ajaxOptions:{dataType:"json",type:"patch"}})}},Wysiwyg={init:function(){var e={path_absolute:"/admin/",selector:"textarea.wysiwyg-editor",plugins:["advlist autolink lists link image charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen","insertdatetime media nonbreaking save table contextmenu directionality","emoticons template paste textcolor colorpicker textpattern"],toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media",relative_urls:!1,file_browser_callback:function(t,n,i,o){var a=window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth,l=window.innerHeight||document.documentElement.clientHeight||document.getElementsByTagName("body")[0].clientHeight,s=e.path_absolute+"laravel-filemanager?field_name="+t;s+="image"==i?"&type=Images":"&type=Files",tinyMCE.activeEditor.windowManager.open({file:s,title:"Filemanager",width:.8*a,height:.8*l,resizable:"yes",close_previous:"no"})}};tinymce.init(e)}},Form={init:function(){$("form.form-validate button.submit").on("click",function(e){e.preventDefault();var t=$(e.target.attributes.value).val(),n=$(this).closest("form.form-validate");Form.validateForm(n,t)}),$(".form-validate input").bind("blur",function(){Form.validateInputField($(this))}),$('input[name="toggle"]').bind("click",function(){http.post($(this).data("toggle"))})},serialize:function(e){var t=e.serializeArray(),n={};return $.each(t,function(e,t){n[t.name]=t.value}),n},errors:function(e){return $.parseJSON(e.responseText)},getGroupFor:function(e,t){return e.find('[name="'+t+'"]').closest(".form-group")},failFor:function(e,t){e.addClass("has-error"),e.find("label").removeClass("success-color"),e.find("input").removeClass("input-success"),e.find(".help-block").html(t.join(" "))},successFor:function(e){e.removeClass("has-error"),e.find("label").addClass("success-color"),e.find("input").addClass("input-success"),e.find(".help-block").html("")},validateForm:function(e,t){http.post(e.attr("action"),Form.serialize(e)).then(function(){var n=e[0];void 0!==t&&$("<input type='hidden'/>").attr("name","redirect").val(t).appendTo(n),n.submit()}).catch(function(t){$.each(Form.errors(t),function(t,n){Form.failFor(Form.getGroupFor(e,t),n)})})},validateInputField:function(e){var t=e.closest("form"),n=e.attr("name");$(e).hasClass("uri-slug")&&$(e).val(Form.slugify($(e).val())),$(e).hasClass("snake-slug")&&$(e).val(Form.snakify($(e).val())),http.post(t.attr("action"),Form.serialize(t)).then(function(){Form.successFor(Form.getGroupFor(t,n))}).catch(function(e){var i=Form.getGroupFor(t,n);i.hasClass("has-error")&&Form.successFor(i),$.each(Form.errors(e),function(e,i){e==n&&Form.failFor(Form.getGroupFor(t,n),i)})})},slugify:function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},snakify:function(e){return e.toString().toLowerCase().replace(/\s+/g,"_").replace(/[^\w\-]+/g,"").replace(/__+/g,"_").replace(/^_+/,"").replace(/_+$/,"")}};$(document).ready(function(){PreLoader.init(),Responsive.init(),MetisMenu.init(),JsTree.init(),DataTables.init(),ScrollBar.init(),WavesEffect.init(),MenuSearchBar.init(),DropDownMenu.init(),FullScreenMode.init(),Form.init(),ContentBlock.init(),FormComponents.init(),Notifications.init(),TimeDisplay.init(),Tooltips.init(),Popover.init(),Collapse.init(),SidePanel.init(),MenuToggle.init(),Nestable.init(),Editable.init(),Wysiwyg.init()});
